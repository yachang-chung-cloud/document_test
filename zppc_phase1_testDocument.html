<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <base target="_top">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¼‰å…¥ä¸­...</title> <!-- æ¨™é¡Œæœƒå‹•æ…‹æ›´æ› -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;700&family=Petrona:wght@400;600&family=Work+Sans:wght@400;600&display=swap" rel="stylesheet">
  
  <style>
    /* é€™è£¡åªä¿ç•™é©—è­‰ç•«é¢çš„æ¨£å¼ï¼Œå…§å®¹æ¨£å¼æœƒéš¨ Base64 è§£é–‹å¾Œè¼‰å…¥ */
    :root { --ivory: #F5FAF2; --dark-teal: #204D4C; --accent-teal: #51A099; --white: #FFFFFF; --pale-green: #D9ECD2; --font-header: 'Petrona', 'Noto Serif TC', serif; --font-body: 'Work Sans', 'Noto Sans TC', sans-serif; }
    body { margin: 0; padding: 0; font-family: var(--font-body); background-color: var(--ivory); height: 100vh; display: flex; flex-direction: column; }
    
    /* é©—è­‰é®ç½© */
    #auth-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--ivory); z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; }
    .auth-box { background: var(--white); padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(32, 77, 76, 0.15); text-align: center; max-width: 400px; width: 90%; border-top: 6px solid var(--dark-teal); }
    .auth-title { font-family: var(--font-header); color: var(--dark-teal); font-size: 1.5rem; margin-bottom: 20px; font-weight: 700; }
    .auth-input { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid var(--pale-green); border-radius: 6px; font-size: 1rem; text-align: center; letter-spacing: 2px; box-sizing: border-box; }
    .auth-btn { width: 100%; padding: 12px; background-color: var(--dark-teal); color: var(--white); border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background 0.3s; }
    .auth-btn:hover { background-color: var(--accent-teal); }
    .auth-msg { margin-top: 15px; font-size: 0.9rem; min-height: 1.2em; color: #666; }
    .auth-msg.error { color: #d32f2f; }
    .auth-msg.success { color: #2e7d32; }
    
    /* éš±è—çš„å…§å®¹å€ */
    #app-root { width: 100%; height: 100%; display: none; flex-direction: column; }
    
    /* Loading å‹•ç•« */
    .spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid rgba(255,255,255,.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; margin-right: 8px; vertical-align: middle; display: none; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>

  <div id="auth-container">
    <div class="auth-box">
      <div style="margin-bottom: 20px;">
        <img src="https://storage.googleapis.com/aiii-storage-public/zpt/ZPH01.Logo.POS.png" alt="Logo" style="height: 50px;">
      </div>
      <div class="auth-title" id="page-title">å—ä¿è­·çš„æ–‡ä»¶</div>
      
      <!-- é–å®šç‹€æ…‹ UI -->
      <div id="lock-ui" style="display:none;">
        <input type="password" id="access-code" class="auth-input" placeholder="Enter Access Code" />
        <button id="btn-verify" class="auth-btn" onclick="verifyCode()">
          <span class="spinner" id="btn-spinner"></span><span id="btn-text">æŸ¥çœ‹å…§å®¹</span>
        </button>
        <div id="auth-msg" class="auth-msg">è«‹è¼¸å…¥é©—è­‰ç¢¼ä»¥è§£é–</div>
      </div>

      <!-- è®€å–ä¸­ UI -->
      <div id="loading-ui">
        <p>æ­£åœ¨ç¢ºèªæ¬Šé™...</p>
      </div>
    </div>
  </div>

  <div id="app-root"></div>

  <script>
    // =========================================================
    // ğŸŸ¢ è¨­å®šå€ (è«‹ BD/AM ä¿®æ”¹é€™è£¡)
    // =========================================================
    
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxlFcznIZz98m7lkqo8l5_lDenFTNJi-hQSxQEXFkiIo3s5uFOCIcFsjCNjUKDKbqaOZg/exec'; // å¡«å…¥ä½ çš„ GAS ç¶²å€
    const DOCUMENT_KEY = 'zppc_phase1_testDocument'; // å°æ‡‰ Google Sheet çš„ document_key
    
    // è«‹å°‡ AI ç”¢å‡ºçš„ HTML å…§å®¹ï¼Œé€éè½‰æ›å™¨è½‰æˆäº‚ç¢¼ï¼Œè²¼åœ¨ä¸‹æ–¹å¼•è™Ÿä¸­
    const PROTECTED_CONTENT = `PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICA8YmFzZSB0YXJnZXQ9Il90b3AiPgogIDwhLS0g5byV5YWlIEdvb2dsZSBGb250cyAtLT4KICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU5vdG8rU2FucytUQzp3Z2h0QDMwMDs0MDA7NTAwOzcwMCZmYW1pbHk9Tm90bytTZXJpZitUQzp3Z2h0QDQwMDs3MDAmZmFtaWx5PVBldHJvbmE6d2dodEA0MDA7NjAwJmZhbWlseT1Xb3JrK1NhbnM6d2dodEA0MDA7NjAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAKICA8c3R5bGU+CiAgICAvKiAtLS0gQnJhbmRpbmcgVmFyaWFibGVzIC0tLSAqLwogICAgOnJvb3QgewogICAgICAtLXNreTogI0FFRTBFODsKICAgICAgLS1wYWxlLWdyZWVuOiAjRDlFQ0QyOwogICAgICAtLWxpZ2h0LWdyZWVuOiAjRTRGMkU3OwogICAgICAtLWl2b3J5OiAjRjVGQUYyOwogICAgICAtLWRhcmstdGVhbDogIzIwNEQ0QzsKICAgICAgLS1hY2NlbnQtdGVhbDogIzUxQTA5OTsKICAgICAgLS1ibGFjazogIzAwMDAwMDsKICAgICAgLS13aGl0ZTogI0ZGRkZGRjsKICAgICAgLS13YXJuaW5nLWJnOiAjZmZmOGUxOyAvKiDmn5TlkoznmoTpu4PoibLog4zmma/nlKjmlrzorabnpLogKi8KICAgICAgLS13YXJuaW5nLWJvcmRlcjogI2ZmZTA4MjsKICAgICAgCiAgICAgIC0tZ3JhZGllbnQtbWFpbjogbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCB2YXIoLS1za3kpLCB2YXIoLS1saWdodC1ncmVlbikpOwogICAgICAtLWdyYWRpZW50LWhvdmVyOiBsaW5lYXItZ3JhZGllbnQoNDVkZWcsIHZhcigtLXBhbGUtZ3JlZW4pLCB2YXIoLS1pdm9yeSkpOwoKICAgICAgLS1mb250LWhlYWRlcjogJ1dvcmsgU2FucycsICdOb3RvIFNhbnMgVEMnLCBzYW5zLXNlcmlmOwogICAgICAtLWZvbnQtYm9keTogJ1dvcmsgU2FucycsICdOb3RvIFNhbnMgVEMnLCBzYW5zLXNlcmlmOwogICAgfQoKICAgICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CgogICAgYm9keSB7CiAgICAgIG1hcmdpbjogMDsKICAgICAgcGFkZGluZzogMDsKICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtYm9keSk7CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWl2b3J5KTsKICAgICAgY29sb3I6IHZhcigtLWJsYWNrKTsKICAgICAgaGVpZ2h0OiAxMDB2aDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIH0KCiAgICAvKiBIZWxwZXIgY2xhc3MgZm9yIEVuZ2xpc2ggdGV4dCBzdHlsaW5nICovCiAgICAuZW4tc3ViIHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIGZvbnQtc2l6ZTogMC44NWVtOwogICAgICBvcGFjaXR5OiAwLjg1OwogICAgICBmb250LXdlaWdodDogNDAwOwogICAgICBtYXJnaW4tdG9wOiA0cHg7CiAgICAgIGxpbmUtaGVpZ2h0OiAxLjM7CiAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyAvKiDorpPpu57mk4rkuovku7bnqb/pgI/mloflrZfvvIznm7TmjqXkvZznlKjlnKjmjInpiJXkuIogKOmhjeWkluS/nemaqikgKi8KICAgIH0KCiAgICAvKiAtLS0gSGVhZGVyIC0tLSAqLwogICAgLmhlYWRlciB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgcGFkZGluZzogMTVweCAzMHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wYWxlLWdyZWVuKTsKICAgICAgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOwogICAgICBmbGV4LXNocmluazogMDsKICAgIH0KCiAgICAubG9nbyBpbWcgewogICAgICBoZWlnaHQ6IDQwcHg7CiAgICB9CgogICAgLmhlYWRlci10aXRsZSB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWhlYWRlcik7CiAgICAgIGNvbG9yOiB2YXIoLS1kYXJrLXRlYWwpOwogICAgICBmb250LXdlaWdodDogNzAwOwogICAgICBmb250LXNpemU6IDEuMnJlbTsKICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7CiAgICB9CgogICAgLyogLS0tIE1haW4gTGF5b3V0IC0tLSAqLwogICAgLm1haW4tY29udGFpbmVyIHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleDogMTsKICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIH0KCiAgICAvKiAtLS0gU2lkZWJhciAoTWFpbiBUYWJzKSAtLS0gKi8KICAgIC5zaWRlYmFyIHsKICAgICAgd2lkdGg6IDI1MHB4OwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrLXRlYWwpOwogICAgICBjb2xvcjogdmFyKC0td2hpdGUpOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBwYWRkaW5nOiAyMHB4IDA7CiAgICAgIGZsZXgtc2hyaW5rOiAwOwogICAgfQoKICAgIC5uYXYtYnRuIHsKICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgY29sb3I6IHZhcigtLXdoaXRlKTsKICAgICAgcGFkZGluZzogMTVweCAyNXB4OwogICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1oZWFkZXIpOwogICAgICBmb250LXNpemU6IDEuMXJlbTsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zczsKICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgb3BhY2l0eTogMC43OwogICAgICB3aWR0aDogMTAwJTsgLyog56K65L+d5oyJ6YiV5aGr5ru/5a+s5bqmICovCiAgICB9CgogICAgLm5hdi1idG46aG92ZXIgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuMSk7CiAgICAgIG9wYWNpdHk6IDE7CiAgICB9CgogICAgLm5hdi1idG4uYWN0aXZlIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjE1KTsKICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB2YXIoLS1za3kpOwogICAgICBvcGFjaXR5OiAxOwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgIH0KCiAgICAvKiAtLS0gQ29udGVudCBBcmVhIC0tLSAqLwogICAgLmNvbnRlbnQtYXJlYSB7CiAgICAgIGZsZXg6IDE7CiAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWl2b3J5KTsKICAgIH0KCiAgICAvKiAtLS0gU2VjdGlvbjogSW50cm8gLS0tICovCiAgICAuaW50cm8tY29udGFpbmVyIHsKICAgICAgbWF4LXdpZHRoOiA4MDBweDsKICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICB9CgogICAgLmNhcmQgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgzMiwgNzcsIDc2LCAwLjA4KTsKICAgICAgYm9yZGVyLXRvcDogNXB4IHNvbGlkIHZhcigtLXNreSk7CiAgICB9CgogICAgaDIgewogICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1oZWFkZXIpOwogICAgICBjb2xvcjogdmFyKC0tZGFyay10ZWFsKTsKICAgICAgbWFyZ2luLXRvcDogMDsKICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1wYWxlLWdyZWVuKTsKICAgIH0KCiAgICAubG9naW4tYm94IHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQtZ3JlZW4pOwogICAgICBwYWRkaW5nOiAyMHB4OwogICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgIG1hcmdpbjogMTVweCAwOwogICAgICBjb2xvcjogdmFyKC0tZGFyay10ZWFsKTsKICAgIH0KCiAgICB1bCB7CiAgICAgIHBhZGRpbmctbGVmdDogMjBweDsKICAgIH0KICAgIAogICAgbGkgewogICAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICB9CgogICAgLyogLS0tIFNlY3Rpb246IFNjZW5hcmlvcyBMYXlvdXQgLS0tICovCiAgICAuc2NlbmFyaW8td3JhcHBlciB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGdhcDogMjBweDsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgfQoKICAgIC8qIFNjZW5hcmlvIE5hdmlnYXRpb24gKElubmVyIFNpZGViYXIpICovCiAgICAuc2NlbmFyaW8tbmF2IHsKICAgICAgd2lkdGg6IDI4MHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBnYXA6IDEwcHg7CiAgICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7CiAgICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICB9CgogICAgLnNjZW5hcmlvLWJ0biB7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tcGFsZS1ncmVlbik7CiAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgICAgdGV4dC1hbGlnbjogbGVmdDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICB0cmFuc2l0aW9uOiAwLjNzOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB9CgogICAgLnNjZW5hcmlvLWJ0bjpob3ZlciB7CiAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZGFyay10ZWFsKTsKICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDVweCk7CiAgICB9CgogICAgLnNjZW5hcmlvLWJ0bi5hY3RpdmUgewogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1tYWluKTsKICAgICAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgY29sb3I6IHZhcigtLWRhcmstdGVhbCk7CiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsKICAgIH0KCiAgICAuc2NlbmFyaW8tYnRuIC5jb2RlIHsKICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgIG9wYWNpdHk6IDAuNzsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIG1hcmdpbi1ib3R0b206IDRweDsKICAgIH0KCiAgICAvKiBTY2VuYXJpbyBEZXRhaWwgKi8KICAgIC5zY2VuYXJpby1kZXRhaWwgewogICAgICBmbGV4OiAxOwogICAgICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7CiAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgzMiwgNzcsIDc2LCAwLjA4KTsKICAgICAgb3ZlcmZsb3cteTogYXV0bzsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIH0KCiAgICAuc2NlbmFyaW8taGVhZGVyIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIH0KICAgIAogICAgLnNjZW5hcmlvLWhlYWRlciBoMyB7CiAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWhlYWRlcik7CiAgICAgIGNvbG9yOiB2YXIoLS1kYXJrLXRlYWwpOwogICAgICBmb250LXNpemU6IDEuOHJlbTsKICAgICAgbWFyZ2luOiAwIDAgMTBweCAwOwogICAgfQoKICAgIC8qIFdhcm5pbmcgQm94ICovCiAgICAud2FybmluZy1ib3ggewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13YXJuaW5nLWJnKTsKICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0td2FybmluZy1ib3JkZXIpOwogICAgICBjb2xvcjogI2IzNmIwMDsKICAgICAgcGFkZGluZzogMTJweCAxNXB4OwogICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgIGZvbnQtc2l6ZTogMC45NXJlbTsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0OwogICAgICBnYXA6IDEwcHg7CiAgICB9CiAgICAud2FybmluZy1ib3ggc3Ryb25nIHsKICAgICAgY29sb3I6ICM5YzViMDA7CiAgICB9CgogICAgLnN0ZXAtbGlzdCB7CiAgICAgIGNvdW50ZXItcmVzZXQ6IHN0ZXA7CiAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgICB9CgogICAgLnN0ZXAtbGlzdCBsaSB7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgcGFkZGluZy1sZWZ0OiA0MHB4OwogICAgICBtYXJnaW4tYm90dG9tOiAxMnB4OwogICAgICBjb2xvcjogdmFyKC0tYmxhY2spOwogICAgfQoKICAgIC5zdGVwLWxpc3QgbGk6OmJlZm9yZSB7CiAgICAgIGNvdW50ZXItaW5jcmVtZW50OiBzdGVwOwogICAgICBjb250ZW50OiBjb3VudGVyKHN0ZXApOwogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIGxlZnQ6IDA7CiAgICAgIHRvcDogMnB4OwogICAgICB3aWR0aDogMjRweDsKICAgICAgaGVpZ2h0OiAyNHB4OwogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1za3kpOwogICAgICBjb2xvcjogdmFyKC0tZGFyay10ZWFsKTsKICAgICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICB9CgogICAgLyogVmlkZW8gQ29udGFpbmVyICovCiAgICAudmlkZW8tY29udGFpbmVyIHsKICAgICAgbWFyZ2luLXRvcDogYXV0bzsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmxhY2spOwogICAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICBtaW4taGVpZ2h0OiAzMDBweDsgCiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICBjb2xvcjogdmFyKC0td2hpdGUpOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICB9CiAgICAKICAgIHZpZGVvIHsKICAgICAgbWF4LXdpZHRoOiAxMDAlOwogICAgICBtYXgtaGVpZ2h0OiA2MHZoOyAKICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsMCwwLDAuMik7CiAgICB9CgogICAgLyogVXRpbGl0eSAqLwogICAgLmhpZGRlbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKICAgIC8qIFJXRCAqLwogICAgQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgICAgIC5tYWluLWNvbnRhaW5lciB7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG92ZXJmbG93LXk6IGF1dG87fQogICAgICAuc2lkZWJhciB7IHdpZHRoOiAxMDAlOyBmbGV4LWRpcmVjdGlvbjogcm93OyBwYWRkaW5nOiAwOyBvdmVyZmxvdy14OiBhdXRvO30KICAgICAgLm5hdi1idG4geyBmbGV4OiAxOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IGJvcmRlci1sZWZ0OiBub25lOyBib3JkZXItYm90dG9tOiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IH0KICAgICAgLm5hdi1idG4uYWN0aXZlIHsgYm9yZGVyLWxlZnQ6IG5vbmU7IGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB2YXIoLS1za3kpOyB9CiAgICAgIAogICAgICAuc2NlbmFyaW8td3JhcHBlciB7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IH0KICAgICAgLnNjZW5hcmlvLW5hdiB7IHdpZHRoOiAxMDAlOyBtYXgtaGVpZ2h0OiAxNTBweDsgfQogICAgICAuY29udGVudC1hcmVhIHsgcGFkZGluZzogMTVweDsgfQogICAgfQogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CgogIDwhLS0gSGVhZGVyIC0tPgogIDxoZWFkZXIgY2xhc3M9ImhlYWRlciI+CiAgICA8ZGl2IGNsYXNzPSJsb2dvIj4KICAgICAgPGltZyBzcmM9Imh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9haWlpLXN0b3JhZ2UtcHVibGljL3pwdC9aUEgwMS5Mb2dvLlBPUy5wbmciIGFsdD0iTG9nbyI+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImhlYWRlci10aXRsZSI+CiAgICAgIOa4rOippuaTjeS9nOaJi+WGiiBCZXRhCiAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsiPlRlc3RpbmcgTWFudWFsIEJldGE8L3NwYW4+CiAgICA8L2Rpdj4KICA8L2hlYWRlcj4KCiAgPCEtLSBNYWluIENvbnRhaW5lciAtLT4KICA8ZGl2IGNsYXNzPSJtYWluLWNvbnRhaW5lciI+CiAgICAKICAgIDwhLS0gU2lkZWJhciBOYXZpZ2F0aW9uIC0tPgogICAgPG5hdiBjbGFzcz0ic2lkZWJhciI+CiAgICAgIDwhLS0g5L+u5q2j77ya5Yqg5YWlIHRoaXMg5Y+D5pW45YKz6YGeIC0tPgogICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoTWFpblRhYignaW5zdHJ1Y3Rpb25zJywgdGhpcykiPgogICAgICAgIDEuIOa4rOippuiqquaYjgogICAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiPlRlc3QgSW5zdHJ1Y3Rpb25zPC9zcGFuPgogICAgICA8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0ic3dpdGNoTWFpblRhYignc2NlbmFyaW9zJywgdGhpcykiPgogICAgICAgIDIuIOa4rOippuaDheWigwogICAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiPlRlc3QgU2NlbmFyaW9zPC9zcGFuPgogICAgICA8L2J1dHRvbj4KICAgIDwvbmF2PgoKICAgIDwhLS0gQ29udGVudCBBcmVhIC0tPgogICAgPG1haW4gY2xhc3M9ImNvbnRlbnQtYXJlYSI+CiAgICAgIAogICAgICA8IS0tIFRhYiAxOiDmuKzoqaboqqrmmI4gLS0+CiAgICAgIDxkaXYgaWQ9InRhYi1pbnN0cnVjdGlvbnMiIGNsYXNzPSJpbnRyby1jb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgPGgyPgogICAgICAgICAgICDmuKzoqabpgKPntZDoiIfnmbvlhaUKICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVuLXN1YiI+VGVzdCBMaW5rICYgTG9naW48L3NwYW4+CiAgICAgICAgICA8L2gyPgogICAgICAgICAgPHA+CiAgICAgICAgICAgIOatoei/juS9v+eUqCBQQysgT3V0cmVhY2gg566h55CG5bmz5Y+wIEJldGEg54mI77yM6KuL5L2/55So5Lul5LiL6LOH6KiK55m75YWl77yaPGJyPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0iZW4tc3ViIj5XZWxjb21lIHRvIFBDKyBPdXRyZWFjaCBNYW5hZ2VtZW50IFBsYXRmb3JtIEJldGEuIFBsZWFzZSB1c2UgdGhlIGZvbGxvd2luZyBpbmZvIHRvIGxvZyBpbjo8L3NwYW4+CiAgICAgICAgICA8L3A+CiAgICAgICAgICAKICAgICAgICAgIDxkaXYgY2xhc3M9ImxvZ2luLWJveCI+CiAgICAgICAgICAgIDxzdHJvbmc+5ris6Kmm6YCj57WQ77yaPC9zdHJvbmc+IDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45ZW0iPihUZXN0IExpbmspPC9zcGFuPjxicj4KICAgICAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9zdHVkaW8tLXpwLW91dHJlYWNoLW1vZHVsZS04MTUyOS1iOGE0MC51cy1jZW50cmFsMS5ob3N0ZWQuYXBwL2xvZ2luIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiAjMjA0RDRDOyBmb250LXdlaWdodDogYm9sZDsiPgogICAgICAgICAgICAgIOm7nuaTiuWJjeW+gOa4rOippueSsOWigzxicj4KICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC45ZW07Ij5DbGljayB0byB2aXNpdCBUZXN0IEVudmlyb25tZW50PC9zcGFuPgogICAgICAgICAgICA8L2E+PGJyPjxicj4KICAgICAgICAgICAgPHN0cm9uZz7kuLvnrqHluLPomZ/os4foqIrvvJo8L3N0cm9uZz4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjllbSI+KFN1cGVydmlzb3IgQWNjb3VudCBJbmZvKTwvc3Bhbj48YnI+CiAgICAgICAgICAgIOKAoiDmiYvmqZ/omZ/norwgKE1vYmlsZSnvvJo8Y29kZT4wOTExMTExMTExPC9jb2RlPjxicj4KICAgICAgICAgICAg4oCiIE9UUOmpl+itieeivCAoT1RQKe+8mjxjb2RlPjEyMzQ1NjwvY29kZT48YnI+CiAgICAgICAgICAgIOKAoiDlr4bnorwgKFBhc3N3b3JkKe+8mjxjb2RlPjEyMzQ1NjwvY29kZT4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgIDxoMj4KICAgICAgICAgICAg5ris6Kmm6YeN6bue6IiH5rOo5oSP5LqL6aCFCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiPlRlc3RpbmcgRm9jdXMgJiBOb3RpY2VzPC9zcGFuPgogICAgICAgICAgPC9oMj4KICAgICAgICAgIDx1bD4KICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgIDxzdHJvbmc+5oOF5aKD5pON5L2c77yaPC9zdHJvbmc+6KuL5YiH5o+b6Iez44CM5ris6Kmm5oOF5aKD44CN5YiG6aCB77yM5L6d5bqP5a6M5oiQIEF+RiDnmoTmk43kvZzmtYHnqIvjgII8YnI+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVuLXN1YiI+PHN0cm9uZz5TY2VuYXJpbyBPcHM6PC9zdHJvbmc+IFBsZWFzZSBzd2l0Y2ggdG8gdGhlICJUZXN0IFNjZW5hcmlvcyIgdGFiIGFuZCBjb21wbGV0ZSBzdGVwcyBBfkYgaW4gb3JkZXIuPC9zcGFuPgogICAgICAgICAgICA8L2xpPgogICAgICAgICAgICA8bGk+CiAgICAgICAgICAgICAgPHN0cm9uZz7lj43ppYvmlrnlvI/vvJo8L3N0cm9uZz7oi6XmnInku7vkvZXlu7rorbDvvIzoq4vmlrwgPHN0cm9uZz4wMS8yM++8iOS6lO+8ieacg+itsDwvc3Ryb25nPiDkuIrmj5Dlh7rvvIzmiJblnKggTElORSDnvqTntYTnlZnoqIDvvIzlnJjpmorlsIfpgI/pgY4gQUkg6YCy6KGM5pS25pW044CCPGJyPgogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiPjxzdHJvbmc+RmVlZGJhY2s6PC9zdHJvbmc+IFBsZWFzZSBwcm92aWRlIHN1Z2dlc3Rpb25zIGluIHRoZSBtZWV0aW5nIG9uIDAxLzIzIChGcmkpIG9yIGxlYXZlIGEgbWVzc2FnZSBpbiB0aGUgTElORSBncm91cC48L3NwYW4+CiAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgIDxsaT4KICAgICAgICAgICAgICA8c3Ryb25nPuaJi+apn+a4rOippu+8mjwvc3Ryb25nPuW5s+WPsOaUr+aPtCBSV0TvvIzoq4vli5nlv4XljZTliqnmuKzoqabmiYvmqZ/ku4vpnaLnmoTmk43kvZzpq5TpqZfjgII8YnI+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVuLXN1YiI+PHN0cm9uZz5Nb2JpbGUgVGVzdDo8L3N0cm9uZz4gVGhlIHBsYXRmb3JtIHN1cHBvcnRzIFJXRDsgcGxlYXNlIHZlcmlmeSB0aGUgbW9iaWxlIGludGVyZmFjZSBleHBlcmllbmNlLjwvc3Bhbj4KICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgPGxpPgogICAgICAgICAgICAgIDxzdHJvbmc+6KOc5YWF6Kqq5piO77yaPC9zdHJvbmc+CiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVuLXN1YiIgc3R5bGU9ImRpc3BsYXk6aW5saW5lOyI+KFN1cHBsZW1lbnRhcnkgTm90ZXMpPC9zcGFuPgogICAgICAgICAgICAgIDx1bD4KICAgICAgICAgICAgICAgIDxsaT7liJ3mrKHnmbvlhaUgRGFzaGJvYXJkIOiugOWPliBEZW1vIOizh+aWmee0hOmcgCAzLTUg56eS77yM6KuL6ICQ5b+D562J5YCZ44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPldhaXQgMy01cyBmb3IgRGVtbyBkYXRhIHRvIGxvYWQgdXBvbiBmaXJzdCBsb2dpbi48L3NwYW4+PC9saT4KICAgICAgICAgICAgICAgIDxsaT7oi6XmtYHnqIvljaHkvY/vvIzlu7rorbDph43mlrDmlbTnkIbpoIHpnaLmiJbph43mlrDnmbvlhaXjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+SWYgc3R1Y2ssIHBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIG9yIHJlLWxvZ2luLjwvc3Bhbj48L2xpPgogICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICA8L3VsPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KCiAgICAgIDwhLS0gVGFiIDI6IOa4rOippuaDheWigyAo5YyF5ZCr5LqM57Sa5bCO6IiqKSAtLT4KICAgICAgPGRpdiBpZD0idGFiLXNjZW5hcmlvcyIgY2xhc3M9InNjZW5hcmlvLXdyYXBwZXIgaGlkZGVuIj4KICAgICAgICAKICAgICAgICA8IS0tIOW3puWBtOaDheWig+mBuOWWriAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJzY2VuYXJpby1uYXYiIGlkPSJzY2VuYXJpby1tZW51Ij4KICAgICAgICAgIDwhLS0gSlMg5bCH5YuV5oWL55Sf5oiQ5oyJ6YiVIC0tPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIOWPs+WBtOaDheWig+WFp+WuuSAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJzY2VuYXJpby1kZXRhaWwiPgogICAgICAgICAgPGRpdiBpZD0ic2NlbmFyaW8tY29udGVudCI+CiAgICAgICAgICAgIDwhLS0gSlMg5bCH5YuV5oWL5aGr5YWl5YWn5a65IC0tPgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICA8L2Rpdj4KCiAgICA8L21haW4+CiAgPC9kaXY+CgogIDxzY3JpcHQ+CiAgICAvLyAtLS0gRGF0YTog5ris6Kmm5oOF5aKD6LOH5paZICjljIXlkKvkuK3oi7Hmlofnv7vora8pIC0tLQogICAgY29uc3Qgc2NlbmFyaW9zID0gWwogICAgICB7CiAgICAgICAgaWQ6ICdBJywKICAgICAgICB0aXRsZTogJ+aWsOeXheaCo+aUtuahiOiIh+W7uuaqlDxzcGFuIGNsYXNzPSJlbi1zdWIiPk5ldyBQYXRpZW50IEVucm9sbG1lbnQ8L3NwYW4+JywKICAgICAgICBkZXNjOiAn5qih5pOs5YCL566h5bir5Zyo54++5aC05oiW5pS25Yiw6LOH5paZ5b6M77yM5bCH5paw55eF5oKj6LOH5paZ6Ly45YWl57O757Wx44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPlNpbXVsYXRlIGEgQ2FzZSBNYW5hZ2VyIGVudGVyaW5nIG5ldyBwYXRpZW50IGRhdGEgaW50byB0aGUgc3lzdGVtIHVwb24gcmVjZWl2aW5nIGl0Ljwvc3Bhbj4nLAogICAgICAgIHN0ZXBzOiBbCiAgICAgICAgICAn6bue5pOK5bem5YG06YG45Zau44CM55eF5oKj566h55CG44CN44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNsaWNrICJQYXRpZW50IE1hbmFnZW1lbnQiIG9uIHRoZSBsZWZ0IG1lbnUuPC9zcGFuPicsCiAgICAgICAgICAn6bue5pOK5Y+z5LiK6KeS44CM5paw5aKe55eF5oKj44CN5oyJ6YiV44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNsaWNrIHRoZSAiQWRkIFBhdGllbnQiIGJ1dHRvbiBvbiB0aGUgdG9wIHJpZ2h0Ljwvc3Bhbj4nLAogICAgICAgICAgJ+Whq+Wvq+izh+aWme+8mumBuOaTh+WwiOahiCAo5aaC77ya6IiS5Yqb5aalKeOAgemGq+W4qyAo57O757Wx6Ieq5YuV6YGO5r++KeOAgei8uOWFpeWnk+WQjS/miYvmqZ8v5oCn5Yil44CB6YG45pOH5pS25qGI5pel5pyf44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkZpbGwgaW4gZGF0YTogU2VsZWN0IFByb2plY3QsIERvY3RvciwgTmFtZS9Nb2JpbGUvR2VuZGVyLCBhbmQgRW5yb2xsbWVudCBEYXRlLjwvc3Bhbj4nLAogICAgICAgICAgJ+m7nuaTiuiZm+e3muWNgOWhiuOAjOS4iuWCs+WQjOaEj+abuOOAjSAo5ris6Kmm55So5Y+v6YG45Lu75oSP5ZyW54mH5oiWUERGKeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5DbGljayAiVXBsb2FkIENvbnNlbnQgRm9ybSIgKFNlbGVjdCBhbnkgaW1hZ2UvUERGIGZvciB0ZXN0aW5nKS48L3NwYW4+JywKICAgICAgICAgICfpu57mk4rjgIznorrlrprmlrDlop7jgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgIkNvbmZpcm0gQWRkIi48L3NwYW4+JywKICAgICAgICAgICfnorroqo3liJfooajlh7rnj77mlrDnl4XmgqPvvIzni4DmhYvpoa/npLrngrrjgIzlr6nmoLjkuK3jgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+VmVyaWZ5IHRoZSBuZXcgcGF0aWVudCBhcHBlYXJzIGluIHRoZSBsaXN0IHdpdGggc3RhdHVzICJVbmRlciBSZXZpZXciLjwvc3Bhbj4nCiAgICAgICAgXSwKICAgICAgICB2aWRlb1VybDogJ2h0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9haWlpLXN0b3JhZ2UtcHVibGljL0pvL3BjcGx1c19kZW1vX2EubW92JywKICAgICAgICB3YXJuaW5nOiAn55uu5YmN5Liy5o6lIERlbW8g6LOH5paZ5bqr77yM6bue5pOK44CM56K65a6a5paw5aKe44CN5b6M57O757Wx6ZyA57SEIDEtMyDnp5Llr6vlhaXos4fmlpnvvIzoq4vogJDlv4PnrYnlgJnvvIzli7/ph43opIfpu57mk4rjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q29ubmVjdGVkIHRvIERlbW8gREIuIFN5c3RlbSBuZWVkcyAxLTNzIHRvIHdyaXRlIGRhdGEgYWZ0ZXIgY2xpY2tpbmcgY29uZmlybS4gUGxlYXNlIHdhaXQuPC9zcGFuPicKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnQicsCiAgICAgICAgdGl0bGU6ICfopo/lioPnl4XmgqPnmoTmsrvnmYLoqIjnlas8c3BhbiBjbGFzcz0iZW4tc3ViIj5UcmVhdG1lbnQgUGxhbiBQbGFubmluZzwvc3Bhbj4nLAogICAgICAgIGRlc2M6ICfph53lsI3lt7LmlLbmoYjnl4XmgqPvvIzmjpLlrprmnKrkvobnmoTmsrvnmYLmiJbpl5zmh7foqIjnlasgKFBsYW4p44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPlNjaGVkdWxlIGZ1dHVyZSB0cmVhdG1lbnQgb3IgY2FyZSBwbGFucyBmb3IgZW5yb2xsZWQgcGF0aWVudHMuPC9zcGFuPicsCiAgICAgICAgc3RlcHM6IFsKICAgICAgICAgICflnKjjgIznl4XmgqPnrqHnkIbjgI3liJfooajpu57mk4rku7vkuIDnl4XmgqPpgLLlhaXlhafpoIHjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgYW55IHBhdGllbnQgaW4gdGhlIGxpc3QgdG8gdmlldyBkZXRhaWxzLjwvc3Bhbj4nLAogICAgICAgICAgJ+WIh+aPm+iHs+OAjFBsYW7jgI3liIbpoIHvvIzpu57mk4rjgIzmlrDlop4gUGxhbuOAjeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Td2l0Y2ggdG8gIlBsYW4iIHRhYiBhbmQgY2xpY2sgIkFkZCBQbGFuIi48L3NwYW4+JywKICAgICAgICAgICfnorroqo3ooajllq7lt7Loh6rli5XluLblhaXlsIjmoYjoiIfnl4XmgqPlp5PlkI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+VmVyaWZ5IHByb2plY3QgYW5kIHBhdGllbnQgbmFtZSBhcmUgYXV0by1maWxsZWQuPC9zcGFuPicsCiAgICAgICAgICAn6YG45pOH6aGe5Z6LICjlpoLvvJrmlr3miZPmj5DphpIp77yM5Lim6Kit5a6a6aCQ6KiI5pel5pyf44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPlNlbGVjdCBUeXBlIChlLmcuLCBJbmplY3Rpb24gUmVtaW5kZXIpIGFuZCBzZXQgRXhwZWN0ZWQgRGF0ZS48L3NwYW4+JywKICAgICAgICAgICco6YG455SoKSDli77pgbjjgIzplovllZ/mibnmrKHlu7rnq4vjgI3vvIzoqK3lrprph43opIfpgLHmnJ8gKOWmgu+8muavj+mAseS4gOasoe+8jOmHjeikhyAzIOasoSnjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+KE9wdGlvbmFsKSBDaGVjayAiQmF0Y2ggQ3JlYXRlIiBhbmQgc2V0IGN5Y2xlIChlLmcuLCBXZWVrbHksIDMgdGltZXMpLjwvc3Bhbj4nLAogICAgICAgICAgJ+m7nuaTiuOAjOeiuuiqjeaWsOWinuOAje+8jOS4pueiuuiqjeWIl+ihqOizh+aWmeabtOaWsOOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5DbGljayAiQ29uZmlybSBBZGQiIGFuZCB2ZXJpZnkgdGhlIGxpc3QgdXBkYXRlcy48L3NwYW4+JwogICAgICAgIF0sCiAgICAgICAgdmlkZW9Vcmw6ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vYWlpaS1zdG9yYWdlLXB1YmxpYy9Kby9wY3BsdXNfZGVtb19iLm1vdicsCiAgICAgICAgd2FybmluZzogJ+ebruWJjeS4suaOpSBEZW1vIOizh+aWmeW6q++8jOm7nuaTiuOAjOeiuuiqjeaWsOWinuOAjeW+jOezu+e1semcgOe0hCAxLTMg56eS5a+r5YWl6LOH5paZ77yM6KuL6ICQ5b+D562J5YCZ77yM5Yu/6YeN6KSH6bue5pOK44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNvbm5lY3RlZCB0byBEZW1vIERCLiBQbGVhc2Ugd2FpdCAxLTNzIGFmdGVyIGNvbmZpcm1pbmcuPC9zcGFuPicKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnQycsCiAgICAgICAgdGl0bGU6ICdQbGFuIOeahOaOkueoi+iIh+Wft+ihjDxzcGFuIGNsYXNzPSJlbi1zdWIiPlBsYW4gU2NoZWR1bGluZyAmIEV4ZWN1dGlvbjwvc3Bhbj4nLAogICAgICAgIGRlc2M6ICflsIfopo/lioPlpb3nmoToqIjnlasgKFBsYW4pIOWvpumam+WuieaOkuWIsOihjOS6i+abhiAoU2NoZWR1bGUpIOS4iuOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Bc3NpZ24gcGxhbm5lZCBpdGVtcyB0byB0aGUgYWN0dWFsIFNjaGVkdWxlLjwvc3Bhbj4nLAogICAgICAgIHN0ZXBzOiBbCiAgICAgICAgICAn6bue5pOK5bem5YG06YG45Zau44CM5bel5L2c57i96Ka944CN44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNsaWNrICJXb3JrIE92ZXJ2aWV3IiBvbiB0aGUgbGVmdCBtZW51Ljwvc3Bhbj4nLAogICAgICAgICAgJ+WcqCBQbGFuIOWIhumggeaJvuWIsOeLgOaFi+eCuuOAjOW3suaOkuWumuOAjeeahOmgheebruOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5GaW5kIGl0ZW1zIHdpdGggc3RhdHVzICJTY2hlZHVsZWQiIGluIHRoZSBQbGFuIHRhYi48L3NwYW4+JywKICAgICAgICAgICfpu57mk4rlj7PlgbTmk43kvZzmrITnmoTjgIzml6Xmm4blnJbnpLogKOWuieaOkuihjOeoiynjgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgdGhlICJDYWxlbmRhciBJY29uIiAoU2NoZWR1bGUpIGluIHRoZSBhY3Rpb24gY29sdW1uLjwvc3Bhbj4nLAogICAgICAgICAgJ+eiuuiqjeiHquWLleW4tuWFpeeahOizh+ioiu+8jOioreWumuOAjOaZguauteOAjSjkuIrljYgv5LiL5Y2IKSDoiIfjgIzotbfoqJbmmYLplpPjgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2hlY2sgaW5mbywgc2V0ICJTZXNzaW9uIiAoQU0vUE0pIGFuZCAiU3RhcnQvRW5kIFRpbWUiLjwvc3Bhbj4nLAogICAgICAgICAgJyjoi6XngrroqKroppYpIOmBuOaTh+ioquimluaWueW8jyAo6Z2i5bCN6Z2iL+mbu+ipsSnjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+KElmIFZpc2l0KSBTZWxlY3QgbWV0aG9kIChJbi1wZXJzb24vUGhvbmUpLjwvc3Bhbj4nLAogICAgICAgICAgJ+m7nuaTiuOAjOaWsOWinuiHs+ePreihqOOAjeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5DbGljayAiQWRkIHRvIFNjaGVkdWxlIi48L3NwYW4+JwogICAgICAgIF0sCiAgICAgICAgdmlkZW9Vcmw6ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vYWlpaS1zdG9yYWdlLXB1YmxpYy9Kby9wY3BsdXNfZGVtb19jLm1vdicsCiAgICAgICAgd2FybmluZzogJ+ebruWJjeS4suaOpSBEZW1vIOizh+aWmeW6q++8jOm7nuaTiuOAjOaWsOWinuiHs+ePreihqOOAjeW+jOezu+e1semcgOe0hCAxLTMg56eS5a+r5YWl6LOH5paZ77yM6KuL6ICQ5b+D562J5YCZ77yM5Yu/6YeN6KSH6bue5pOK44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNvbm5lY3RlZCB0byBEZW1vIERCLiBQbGVhc2Ugd2FpdCAxLTNzIGFmdGVyIGFkZGluZyB0byBzY2hlZHVsZS48L3NwYW4+JwogICAgICB9LAogICAgICB7CiAgICAgICAgaWQ6ICdEJywKICAgICAgICB0aXRsZTogJ+afpeeci+W3peS9nOe4veimveiIh+ihjOeoizxzcGFuIGNsYXNzPSJlbi1zdWIiPk92ZXJ2aWV3ICYgU2NoZWR1bGUgQ2hlY2s8L3NwYW4+JywKICAgICAgICBkZXNjOiAn56K66KqNIERhc2hib2FyZCDos4foqIroiIfpmrHnorzlip/og73jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2hlY2sgRGFzaGJvYXJkIGluZm8gYW5kIERhdGEgTWFza2luZyBmZWF0dXJlLjwvc3Bhbj4nLAogICAgICAgIHN0ZXBzOiBbCiAgICAgICAgICAn6bue5pOK5bem5YG06YG45Zau44CMRGFzaGJvYXJk44CN44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNsaWNrICJEYXNoYm9hcmQiIG9uIHRoZSBsZWZ0IG1lbnUuPC9zcGFuPicsCiAgICAgICAgICAn5qqi6KaW44CM5LuK5pel6KGM56iL44CN5YiG6aCB77yM56K66KqN5Ymb5omN5a6J5o6S55qE6KGM56iL5piv5ZCm5Ye654++44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNoZWNrICJUb2RheVwncyBTY2hlZHVsZSIgdG8gc2VlIGlmIHRoZSBpdGVtIGFwcGVhcnMuPC9zcGFuPicsCiAgICAgICAgICAn6bue5pOK5Y+z5LiK6KeS6ZaL6Zec44CM6aGv56S65a6M5pW05aeT5ZCN44CN77yM5ris6Kmm55eF5oKj5aeT5ZCN55qE6Zqx56K8L+mhr+ekuuWIh+aPm+OAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Ub2dnbGUgIlNob3cgRnVsbCBOYW1lIiB0byB0ZXN0IG1hc2tpbmcvdW5tYXNraW5nLjwvc3Bhbj4nLAogICAgICAgICAgJ+m7nuaTiuW3puWBtOmBuOWWruOAjOW3peS9nOe4veimveOAjeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5DbGljayAiV29yayBPdmVydmlldyIgb24gdGhlIGxlZnQgbWVudS48L3NwYW4+JywKICAgICAgICAgICfliIfmj5vkuIrmlrnliIbpoIEgKFBsYW4gLyBOb3RlIC8gRGFpbHkgTG9nKe+8jOeiuuiqjeWDhemhr+ekuuiHquW3seiyoOiyrOeahOizh+aWmeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Td2l0Y2ggdGFicyAoUGxhbiAvIE5vdGUgLyBEYWlseSBMb2cpIHRvIHNlZSBvbmx5IHlvdXIgZGF0YS48L3NwYW4+JwogICAgICAgIF0sCiAgICAgICAgdmlkZW9Vcmw6ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vYWlpaS1zdG9yYWdlLXB1YmxpYy9Kby9wY3BsdXNfZGVtb19kLm1vdicKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnRScsCiAgICAgICAgdGl0bGU6ICfln7fooYzmnI3li5noqJjpjIQgKOaJk+WNoSk8c3BhbiBjbGFzcz0iZW4tc3ViIj5TZXJ2aWNlIFJlY29yZCAoQ2hlY2staW4pPC9zcGFuPicsCiAgICAgICAgZGVzYzogJ+WujOaIkOihjOeoi+W+jO+8jOWhq+Wvq+acjeWLmee0gOmMhOS4pue1kOahiOOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5GaWxsIGluIHNlcnZpY2UgcmVjb3JkIGFuZCBjbG9zZSB0aGUgY2FzZSBhZnRlciBjb21wbGV0aW9uLjwvc3Bhbj4nLAogICAgICAgIHN0ZXBzOiBbCiAgICAgICAgICAn5Zue5Yiw44CMRGFzaGJvYXJk44CN6aaW6aCB55qE44CM5LuK5pel6KGM56iL44CN44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkdvIGJhY2sgdG8gIlRvZGF5XCdzIFNjaGVkdWxlIiBvbiBEYXNoYm9hcmQuPC9zcGFuPicsCiAgICAgICAgICAn5om+5Yiw5LiA5YCL44CM6aeQ6Ki65pyN5YuZ44CN5oiW44CM6Kiq6KaW44CN6aGe5Z6L55qE6KGM56iL44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkZpbmQgYSAiQ2xpbmljIFNlcnZpY2UiIG9yICJWaXNpdCIgc2NoZWR1bGUgaXRlbS48L3NwYW4+JywKICAgICAgICAgICfpu57mk4rjgIzmnI3li5nntIDpjITjgI3mjInpiJUgKOWDheeVtuaXpeihjOeoi+WPr+imiynjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgIlNlcnZpY2UgUmVjb3JkIiBidXR0b24gKE9ubHkgdmlzaWJsZSBmb3IgdG9kYXkpLjwvc3Bhbj4nLAogICAgICAgICAgJ+Whq+Wvq+Wvpumam+i1t+ioluaZgumWk+OAgeWLvumBuOacjeWLmeWFp+WuueOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5GaWxsIGFjdHVhbCBTdGFydC9FbmQgdGltZSBhbmQgY2hlY2sgc2VydmljZSBjb250ZW50Ljwvc3Bhbj4nLAogICAgICAgICAgJ+azqOaEj++8muiLpeaciemXnOiBryBQbGFu77yM56K66KqN5LiL5pa55Ye654++57ag6Imy5Y2A5aGK44CM5LiA5L2157WQ5qGI6Zec6IGvIFBsYW7jgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Tm90ZTogSWYgbGlua2VkIHRvIGEgUGxhbiwgZW5zdXJlICJDbG9zZSBMaW5rZWQgUGxhbiIgYXBwZWFycyBncmVlbi48L3NwYW4+JywKICAgICAgICAgICfpu57mk4rjgIzlhLLlrZjntIDpjITjgI3vvIznorroqo3ni4DmhYvorormm7TngrrjgIzlt7LmnI3li5nntIDpjITjgI3jgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgIlNhdmUgUmVjb3JkIiBhbmQgdmVyaWZ5IHN0YXR1cyBjaGFuZ2VzIHRvICJSZWNvcmRlZCIuPC9zcGFuPicKICAgICAgICBdLAogICAgICAgIHZpZGVvVXJsOiAnaHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL2FpaWktc3RvcmFnZS1wdWJsaWMvSm8vcGNwbHVzX2RlbW9fZS5tb3YnLAogICAgICAgIHdhcm5pbmc6ICfnm67liY3kuLLmjqUgRGVtbyDos4fmlpnluqvvvIzpu57mk4rjgIzlhLLlrZjntIDpjITjgI3lvozns7vntbHpnIDntIQgMS0zIOenkuiZleeQhuizh+aWmeabtOaWsO+8jOiri+iAkOW/g+etieWAme+8jOWLv+mHjeikh+m7nuaTiuOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Db25uZWN0ZWQgdG8gRGVtbyBEQi4gUGxlYXNlIHdhaXQgMS0zcyBhZnRlciBzYXZpbmcuPC9zcGFuPicKICAgICAgfSwKICAgICAgewogICAgICAgIGlkOiAnRicsCiAgICAgICAgdGl0bGU6ICfln7fooYzmnKrliLDoqLrmnI3li5noqJjpjIQ8c3BhbiBjbGFzcz0iZW4tc3ViIj5NaXNzZWQgVmlzaXQgUmVjb3JkPC9zcGFuPicsCiAgICAgICAgZGVzYzogJ+eVtueXheaCo+eIvee0hOaIluihjOeoi+WPlua2iOaZgueahOe0gOmMhOa1geeoi+OAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5Qcm9jZXNzIGZvciBuby1zaG93cyBvciBjYW5jZWxsZWQgc2NoZWR1bGVzLjwvc3Bhbj4nLAogICAgICAgIHN0ZXBzOiBbCiAgICAgICAgICAn5Zyo44CMRGFzaGJvYXJk44CN5LuK5pel6KGM56iL5Lit6YG45pOH5LiA5YCL5bCa5pyq5Z+36KGM55qE6KGM56iL44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPlNlbGVjdCBhIHBlbmRpbmcgc2NoZWR1bGUgaW4gIlRvZGF5XCdzIFNjaGVkdWxlIi48L3NwYW4+JywKICAgICAgICAgICfpu57mk4rjgIzmnKrliLDoqLrmnI3li5njgI3mjInpiJXjgII8YnI+PHNwYW4gY2xhc3M9ImVuLXN1YiI+Q2xpY2sgIk1pc3NlZCBWaXNpdCIgYnV0dG9uLjwvc3Bhbj4nLAogICAgICAgICAgJ+S4i+aLiemBuOaTh+WOn+WboCAo5aaC77ya55eF5oKj5ouS57WV44CB6Yar5bir5LyR6Ki6KeOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5TZWxlY3QgcmVhc29uIChlLmcuLCBQYXRpZW50IFJlZnVzZWQsIERvY3RvciBPZmYpLjwvc3Bhbj4nLAogICAgICAgICAgJ+Whq+Wvq+ijnOWFheiqquaYjuOAgjxicj48c3BhbiBjbGFzcz0iZW4tc3ViIj5GaWxsIGluIHN1cHBsZW1lbnRhcnkgbm90ZXMuPC9zcGFuPicsCiAgICAgICAgICAn6bue5pOK44CM56K66KqN5Zue5aCx44CN77yM56K66KqN6Kmy6KGM56iL54uA5oWL6K6K5pu054K644CM5pyq5Yiw6Ki65pyN5YuZ44CNKOeBsOiJsi/lpJbmoYYp44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNsaWNrICJDb25maXJtIFJlcG9ydCIgYW5kIHZlcmlmeSBzdGF0dXMgY2hhbmdlcyB0byAiTWlzc2VkIFZpc2l0Ii48L3NwYW4+JwogICAgICAgIF0sCiAgICAgICAgdmlkZW9Vcmw6ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vYWlpaS1zdG9yYWdlLXB1YmxpYy9Kby9wY3BsdXNfZGVtb19mLm1vdicsCiAgICAgICAgd2FybmluZzogJ+ebruWJjeS4suaOpSBEZW1vIOizh+aWmeW6q++8jOm7nuaTiuOAjOeiuuiqjeWbnuWgseOAjeW+jOezu+e1semcgOe0hCAxLTMg56eS6JmV55CG6LOH5paZ5pu05paw77yM6KuL6ICQ5b+D562J5YCZ77yM5Yu/6YeN6KSH6bue5pOK44CCPGJyPjxzcGFuIGNsYXNzPSJlbi1zdWIiPkNvbm5lY3RlZCB0byBEZW1vIERCLiBQbGVhc2Ugd2FpdCAxLTNzIGFmdGVyIGNvbmZpcm1pbmcuPC9zcGFuPicKICAgICAgfQogICAgXTsKCiAgICAvLyAtLS0gTG9naWM6IOmggemdouWIh+aPm+iIh+WIneWni+WMliAtLS0KCiAgICAvLyAxLiDliJ3lp4vljJYKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7CiAgICAgIGluaXRTY2VuYXJpb01lbnUoKTsKICAgICAgbG9hZFNjZW5hcmlvKDApOyAvLyDpoJDoqK3ovInlhaXnrKzkuIDlgIvmg4XlooMKICAgIH0pOwoKICAgIC8vIDIuIOWIh+aPm+S4u+WIhumggSAo6Kqq5piOIHZzIOaDheWigykKICAgIC8vIOS/ruato++8muaOpeaUtiBidG5FbGVtZW50IOWPg+aVuO+8jOebtOaOpeaTjeS9nOipsuWFg+e0oAogICAgZnVuY3Rpb24gc3dpdGNoTWFpblRhYih0YWJOYW1lLCBidG5FbGVtZW50KSB7CiAgICAgIC8vIOenu+mZpOaJgOacieaMiemIleeahCBhY3RpdmUg5qij5byPCiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgCiAgICAgIC8vIOWwh+m7nuaTiueahOaMiemIleioreeCuiBhY3RpdmUgKOWmguaenOacieeahOipsSkKICAgICAgaWYgKGJ0bkVsZW1lbnQpIHsKICAgICAgICBidG5FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICB9CgogICAgICAvLyDliIfmj5vlhaflrrnpoa/npLoKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYi1pbnN0cnVjdGlvbnMnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYi1zY2VuYXJpb3MnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgCiAgICAgIGNvbnN0IHRhcmdldFRhYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWItJyArIHRhYk5hbWUpOwogICAgICBpZiAodGFyZ2V0VGFiKSB7CiAgICAgICAgdGFyZ2V0VGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwogICAgICB9CiAgICB9CgogICAgLy8gMy4g5Yid5aeL5YyW5oOF5aKD6YG45ZauCiAgICBmdW5jdGlvbiBpbml0U2NlbmFyaW9NZW51KCkgewogICAgICBjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5hcmlvLW1lbnUnKTsKICAgICAgc2NlbmFyaW9zLmZvckVhY2goKHMsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICdzY2VuYXJpby1idG4nOwogICAgICAgIGlmKGluZGV4ID09PSAwKSBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgLy8gdGl0bGUgYWxyZWFkeSBpbmNsdWRlcyBlbi1zdWIgc3BhbgogICAgICAgIGJ0bi5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9ImNvZGUiPuaDheWigyAke3MuaWR9PC9zcGFuPiR7cy50aXRsZX1gOwogICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFsbAogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNjZW5hcmlvLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICAgIC8vIEFkZCB0byBjdXJyZW50CiAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgICAvLyBMb2FkIGNvbnRlbnQKICAgICAgICAgIGxvYWRTY2VuYXJpbyhpbmRleCk7CiAgICAgICAgfTsKICAgICAgICBtZW51Q29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bik7CiAgICAgIH0pOwogICAgfQoKICAgIC8vIDQuIOi8ieWFpeWWruS4gOaDheWig+WFp+WuuQogICAgZnVuY3Rpb24gbG9hZFNjZW5hcmlvKGluZGV4KSB7CiAgICAgIGNvbnN0IHMgPSBzY2VuYXJpb3NbaW5kZXhdOwogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmFyaW8tY29udGVudCcpOwogICAgICAKICAgICAgLy8g55Sf5oiQ5q2l6amf5YiX6KGoIEhUTUwKICAgICAgY29uc3Qgc3RlcHNIdG1sID0gcy5zdGVwcy5tYXAoc3RlcCA9PiBgPGxpPiR7c3RlcH08L2xpPmApLmpvaW4oJycpOwoKICAgICAgLy8g5b2x54mH5Y2A5aGK6YKP6LyvCiAgICAgIGxldCB2aWRlb0h0bWwgPSAnJzsKICAgICAgaWYgKHMudmlkZW9VcmwpIHsKICAgICAgICAvLyDliKTmlrfmmK/lkKbngrrnm7TmjqXmqpTmoYjpgKPntZAKICAgICAgICBpZiAocy52aWRlb1VybC5pbmNsdWRlcygnc3RvcmFnZS5nb29nbGVhcGlzLmNvbScpIHx8IHMudmlkZW9VcmwuZW5kc1dpdGgoJy5tcDQnKSB8fCBzLnZpZGVvVXJsLmVuZHNXaXRoKCcubW92JykpIHsKICAgICAgICAgICAgdmlkZW9IdG1sID0gYAogICAgICAgICAgICAgIDx2aWRlbyBjb250cm9scyBhdXRvcGxheSBtdXRlZCBwbGF5c2lubGluZT4KICAgICAgICAgICAgICAgIDxzb3VyY2Ugc3JjPSIke3MudmlkZW9Vcmx9IiB0eXBlPSJ2aWRlby9tcDQiPgogICAgICAgICAgICAgICAgPHNvdXJjZSBzcmM9IiR7cy52aWRlb1VybH0iIHR5cGU9InZpZGVvL3F1aWNrdGltZSI+CiAgICAgICAgICAgICAgICDmgqjnmoTngI/opr3lmajkuI3mlK/mj7TmraTlvbHniYfmqJnnsaTvvIzoq4vlmJfoqabkuIvovInmkq3mlL7vvJo8YSBocmVmPSIke3MudmlkZW9Vcmx9Ij7kuIvovInlvbHniYc8L2E+PGJyPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVuLXN1YiI+QnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdmlkZW8gdGFnLiA8YSBocmVmPSIke3MudmlkZW9Vcmx9Ij5Eb3dubG9hZCBWaWRlbzwvYT48L3NwYW4+CiAgICAgICAgICAgICAgPC92aWRlbz5gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGlmcmFtZQogICAgICAgICAgICB2aWRlb0h0bWwgPSBgCiAgICAgICAgICAgICAgPGlmcmFtZSAKICAgICAgICAgICAgICAgIHNyYz0iJHtzLnZpZGVvVXJsfSIgCiAgICAgICAgICAgICAgICB3aWR0aD0iMTAwJSIgCiAgICAgICAgICAgICAgICBoZWlnaHQ9IjEwMCUiIAogICAgICAgICAgICAgICAgc3R5bGU9ImJvcmRlcjpub25lOyBtaW4taGVpZ2h0OjQwMHB4OyIgCiAgICAgICAgICAgICAgICBhbGxvdz0iYXV0b3BsYXk7IGZ1bGxzY3JlZW4iPgogICAgICAgICAgICAgIDwvaWZyYW1lPmA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOeEoeW9seeJh+aZgueahOS9lOS9jeespgogICAgICAgIHZpZGVvSHRtbCA9IGAKICAgICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBvcGFjaXR5OjAuNTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+8J+OpTwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxzdHJvbmc+5b6F6KOc5LiK6J6i5bmV6YyE5b2xPC9zdHJvbmc+PGJyPgogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbi1zdWIiPlNjcmVlbiByZWNvcmRpbmcgcGVuZGluZzwvc3Bhbj48YnI+CiAgICAgICAgICAgICAgJHtzLnRpdGxlfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PmA7CiAgICAgIH0KCiAgICAgIC8vIOeUn+aIkOitpuiqniBIVE1MICjoi6XmnIkpCiAgICAgIGxldCB3YXJuaW5nSHRtbCA9ICcnOwogICAgICBpZiAocy53YXJuaW5nKSB7CiAgICAgICAgd2FybmluZ0h0bWwgPSBgCiAgICAgICAgICA8ZGl2IGNsYXNzPSJ3YXJuaW5nLWJveCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTogMS4ycmVtOyI+4pqg77iPPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPHN0cm9uZz5EZW1vIOezu+e1seaPkOekuu+8mjwvc3Ryb25nPiR7cy53YXJuaW5nfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PmA7CiAgICAgIH0KCiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBjbGFzcz0ic2NlbmFyaW8taGVhZGVyIj4KICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiB2YXIoLS1hY2NlbnQtdGVhbCk7IGZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+5oOF5aKDICR7cy5pZH0gKFNjZW5hcmlvICR7cy5pZH0pPC9kaXY+CiAgICAgICAgICA8aDM+JHtzLnRpdGxlfTwvaDM+CiAgICAgICAgICA8cCBzdHlsZT0iY29sb3I6IzY2NjsiPiR7cy5kZXNjfTwvcD4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICAke3dhcm5pbmdIdG1sfQoKICAgICAgICA8dWwgY2xhc3M9InN0ZXAtbGlzdCI+CiAgICAgICAgICAke3N0ZXBzSHRtbH0KICAgICAgICA8L3VsPgoKICAgICAgICA8ZGl2IGNsYXNzPSJ2aWRlby1jb250YWluZXIiIHN0eWxlPSIke3MudmlkZW9VcmwgPyAnYmFja2dyb3VuZDpibGFjazsnIDogJ2JhY2tncm91bmQ6dmFyKC0taXZvcnkpOyd9Ij4KICAgICAgICAgICR7dmlkZW9IdG1sfQogICAgICAgIDwvZGl2PgogICAgICBgOwogICAgfQogIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=`;

    // =========================================================

    const ui = {
      container: document.getElementById('auth-container'),
      lock: document.getElementById('lock-ui'),
      loading: document.getElementById('loading-ui'),
      title: document.getElementById('page-title'),
      msg: document.getElementById('auth-msg'),
      input: document.getElementById('access-code'),
      btn: document.getElementById('btn-verify'),
      btnText: document.getElementById('btn-text'),
      spinner: document.getElementById('btn-spinner')
    };

    // 1. é é¢è¼‰å…¥æ™‚ï¼šæª¢æŸ¥æ–‡ä»¶æ˜¯å…¬é–‹é‚„æ˜¯ç§å¯†
    window.onload = function() {
      fetch(`${APPS_SCRIPT_URL}?key=${DOCUMENT_KEY}`)
        .then(res => res.json())
        .then(data => {
          ui.loading.style.display = 'none';
          if (data.status === 'success') {
            // å…¬é–‹æ–‡ä»¶ -> ç›´æ¥è§£é–‹
            unlockContent(data.title);
          } else if (data.status === 'locked') {
            // ç§å¯†æ–‡ä»¶ -> é¡¯ç¤ºå¯†ç¢¼æ¡†
            ui.title.innerText = data.title;
            document.title = data.title;
            ui.lock.style.display = 'block';
          } else {
            ui.title.innerText = "æ–‡ä»¶è¨­å®šéŒ¯èª¤";
            ui.msg.innerText = "æ‰¾ä¸åˆ°æ­¤ Document Key";
            ui.msg.classList.add('error');
          }
        })
        .catch(err => {
          ui.loading.style.display = 'none';
          ui.msg.innerText = "é€£ç·šå¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†";
        });
    };

    // 2. æŒ‰ä¸‹æŒ‰éˆ•é©—è­‰
    function verifyCode() {
      const code = ui.input.value.trim();
      if (!code) return;

      setLoading(true);
      
      // å‘¼å« GAS æª¢æŸ¥å¯†ç¢¼
      fetch(`${APPS_SCRIPT_URL}?key=${DOCUMENT_KEY}&code=${code}`)
        .then(res => res.json())
        .then(data => {
          setLoading(false);
          if (data.status === 'success') {
            ui.msg.innerText = "é©—è­‰æˆåŠŸï¼";
            ui.msg.className = "auth-msg success";
            setTimeout(() => unlockContent(data.title), 500);
          } else {
            ui.msg.innerText = "é©—è­‰ç¢¼éŒ¯èª¤";
            ui.msg.className = "auth-msg error";
          }
        })
        .catch(err => {
          setLoading(false);
          ui.msg.innerText = "é©—è­‰ç™¼ç”ŸéŒ¯èª¤";
        });
    }

    // 3. è§£ç¢¼ä¸¦æ³¨å…¥å…§å®¹
    function unlockContent(title) {
      document.title = title;
      const appRoot = document.getElementById('app-root');
      
      try {
        // Base64 è§£ç¢¼ (æ”¯æ´ä¸­æ–‡)
        const decodedHtml = decodeURIComponent(escape(window.atob(PROTECTED_CONTENT)));
        
        // æ³¨å…¥ HTML
        appRoot.innerHTML = decodedHtml;
        
        // éš±è—é©—è­‰ç•«é¢ï¼Œé¡¯ç¤ºå…§å®¹
        ui.container.style.display = 'none';
        appRoot.style.display = 'flex';
        
        // âš ï¸ é‡è¦ï¼šé‡æ–°åŸ·è¡Œæ³¨å…¥å…§å®¹ä¸­çš„ script (å› ç‚º innerHTML ä¸æœƒè‡ªå‹•åŸ·è¡Œ script)
        const scripts = appRoot.getElementsByTagName("script");
        for (let i = 0; i < scripts.length; i++) {
          eval(scripts[i].innerText);
        }
        
        // å¦‚æœæœ‰ initAppLogicï¼ŒåŸ·è¡Œå®ƒ
        if (typeof window.initAppLogic === 'function') {
          window.initAppLogic();
        } else if (typeof initAppLogic === 'function') {
           initAppLogic();
        }

      } catch (e) {
        console.error(e);
        alert('å…§å®¹è§£æå¤±æ•—ï¼šè«‹ç¢ºèª HTML æ˜¯å¦æ­£ç¢ºè½‰ç¢¼');
      }
    }

    function setLoading(isLoading) {
      ui.btn.disabled = isLoading;
      ui.spinner.style.display = isLoading ? 'inline-block' : 'none';
      ui.btnText.innerText = isLoading ? 'é©—è­‰ä¸­...' : 'æŸ¥çœ‹å…§å®¹';
    }

    // æ”¯æ´ Enter éµ
    ui.input.addEventListener("keypress", (e) => { if(e.key === "Enter") verifyCode(); });

  </script>
</body>
</html>
